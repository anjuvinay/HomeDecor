<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home Decor</title>
    
    <link href="assetsb/css/main.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/styles.css" rel="stylesheet" type="text/css" />
</head>

<body>

    <%- include('userHeader') %>
    <main>
        
        <section class="content-main mt-80 mb-80">
            <div class="card mx-auto card-login">
                <div class="card-body">
                    <h4 class="card-title mb-4">Enter new Password</h4>
                    <form action="/resetPassword" method="post" onsubmit="return validateForm()">
                        <% if(locals.message) { %>
                            <span class="text-danger"><%= message %></span>
                        <% } %>
                        <div class="mb-3">
                            <input class="form-control" placeholder="New Password" type="password" name="password1" id="password1" required>
                            <span id="passwordError" class="text-danger"></span>
                        </div> <!-- form-group// -->
                        <div class="mb-3">
                            <input class="form-control" placeholder="Confirm Password" type="password" name="password2" id="password2" required>
                        </div>
                        <div class="mb-3">
                            <input class="form-control" placeholder="Confirm Password" type="hidden" name="email" value="<%= email %>" required>
                        </div> <!-- form-group// -->
                        
                        <div class="mb-4">
                            <button type="submit" class="btn btn-primary w-100">Reset Password </button>
                        </div> <!-- form-group// -->
                    </form>
                    
                    <script>
                        function validateForm() {
                            var password1 = document.getElementById('password1').value;
                            var password2 = document.getElementById('password2').value;
                            var regex = /^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/;
                            var passwordError = document.getElementById('passwordError');
                    
                            if (!regex.test(password1)) {
                                passwordError.textContent = "Password must contain at least one digit, one letter, and be at least 8 characters long.";
                                return false;
                            } else {
                                passwordError.textContent = ""; // Clear any previous error messages
                            }
                    
                            if (password1 !== password2) {
                                passwordError.textContent = "Passwords do not match.";
                                return false;
                            } else {
                                passwordError.textContent = ""; // Clear any previous error messages
                            }
                    
                            // If validation passes, the form will be submitted
                            return true;
                        }
                    </script>
                    
                    
                    
                   
                </div>
            </div>
        </section>
        
    </main>
    <script src="assetsb/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assetsb/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assetsb/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="assetsb/js/main.js" type="text/javascript"></script>
</body>

</html>